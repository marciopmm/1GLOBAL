services:
  mm-api:
    container_name: mm-api
    build:
      context: ..               # repo root (so Dockerfile can COPY publish/ and SQLite/)
      dockerfile: Docker/Dockerfile
    ports:
      - "8080:8080"             # host:container
    environment:
      - ASPNETCORE_URLS=http://0.0.0.0:8080
      - ASPNETCORE_ENVIRONMENT=Production
    volumes:
      # Keep SQLite data on the host (persistent) and at the same level as publish
      - ../SQLite:/app/SQLite

      # Optional: keep publish on the host too (so you can replace binaries without rebuilding)
      # If you prefer a fully self-contained image, remove this line.
      - ../publish:/app/publish:ro
    restart: unless-stopped
